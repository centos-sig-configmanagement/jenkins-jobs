- builder:
    name: documentation-build
    builders:
      - shell: |
          #!/bin/bash -e
          # Ensure we do not expose secrets
          set +x
          set -o pipefail
          virtualenv venv
          source venv/bin/activate
          pip install -r requirements.txt
          make html

- builder:
    name: documentation-publish
    builders:
      - documentation-build:
      - shell: |
          #!/bin/bash -e
          # Ensure we do not expose secrets
          cd build/html
          git init .
          touch .nojekyll
          git add .
          git commit -am 'Documentation'
          git push -f git@github-doc:centos-sig-configmanagement/centos-sig-configmanagement.github.io master
